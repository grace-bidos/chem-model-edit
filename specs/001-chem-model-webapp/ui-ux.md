# UI/UX設計: 計算化学向け構造編集Webアプリ

## 画面構成（情報設計）

- **/editor**: 主編集画面（複数構造の管理・編集・比較）
- **/editor-v2**: 新UIプロトタイプ（モックUI + 段階的に機能接続）
- **/supercell**: スーパーセル構築画面（格子/シーケンス/生成）
- **/share/:id**: 共有ビュー（将来: サーバ保存リンク）

当面は `/editor` での単一HTMLエクスポートを最優先で提供し、共有リンクは次段階で実装する。

## /editor レイアウト

```
┌─────────────────────────────────────────────────────────────────────────┐
│ Top Bar: ロード / 保存 / 共有 / 設定                                    │
├───────────────┬───────────────────────────────┬────────────────────────┤
│ Left Pane     │ Center Pane                    │ Right Pane             │
│ 構造リスト    │ テーブル & 操作                │ 3D Viewer (Mol*)       │
│ (可変数)      │  - Atom Table                  │  - 表示設定            │
│               │  - 距離/比較                   │  - カメラ/背景         │
└───────────────┴───────────────────────────────┴────────────────────────┘
```

## /editor-v2 レイアウト（新UIプロトタイプ）

```
┌──────┬───────────────────────────────────────────────────────────────┐
│Tools │ Header (Search / User)                                       │
│(icon)├───────────────┬───────────────────────────────────────────────┤
│      │ File Manager  │ Workspace (File Panels / Tool Panel)         │
│      │               │                                               │
└──────┴───────────────┴───────────────────────────────────────────────┘
```

- **Tools**: 左のアイコンナビ。転写/スーパーセル/振動(プレビュー)等のツールを切替
- **File Manager**: 取り込み済み構造の一覧と Import
- **Workspace**: 構造ごとのパネル（3D/テーブル/パラメータ）とツール専用パネル
- **命名方針**: 特別モードは「Tools」として整理し、UI上はより説明的な名称に変更する

### Left Pane（構造管理）
- 構造カード一覧（任意数）
- 各カード: 名称、表示ON/OFF、色、透明度、ラベル表示
- 操作: 追加、複製、削除、並び替え、ロック

### Center Pane（編集・比較）
- **Atom Table**: 原子種・x/y/z の編集
- **Selection Panel**: 選択原子の座標表示・まとめてシフト
- **Compare Panel**: 距離テーブル、整列/移植ツール
- **Clipboard**: コピー/貼り付け（XYZ/PDB断片）

### Right Pane（3D Viewer）
- Mol* 表示
- 表示オプション: 背景色、表示モード、ラベル、半透明
- カメラ操作: auto-fit, reset, orthographic/perspective

## /supercell レイアウト

- 左: 格子入力（a,b,c, cosab, cosac, cosbc）、変換支援
- 中: シーケンス入力（例: AB,AA）
- 右: 生成結果テーブル + 3D表示

## 主要UIコンポーネント（shadcn/ui）

- `Tabs`: /editor 内で「編集」「比較」「距離」など切替
- `DataTable`: Atom Table（仮）
- `Card` + `Badge`: 構造カード一覧
- `Dialog`: インポート、共有、エクスポート
- `Select`/`Switch`/`Slider`: 表示設定・オプション
- `Toast`: 入力検証・処理完了通知

## 主要ユーザーフロー

### 1) .in 読み込み
1. 「Import」→ ファイル選択 or クリップボード貼り付け
2. APIで解析 → Structure 生成
3. 左ペインに追加、3D/テーブル表示

### 2) 編集
1. テーブルで座標/原子種を編集
2. 即時に 3D 反映
3. 変更履歴に追記（Undo/Redoは後続）

### 3) 比較・移植
1. 複数構造を表示
2. 原子選択 → コピー → 他構造に貼り付け/整列
3. 距離テーブルで差分確認

### 4) 共有
1. 「Share」→ 単一HTML生成
2. ローカル保存 → 共有

## UX方針

- 研究用途を想定し、**情報密度を高く**保つ
- 重要操作はアイコン＋ラベルで冗長に提示
- 大規模構造は遅延描画・選択のガイドを表示
- 高頻度操作はショートカット対応（将来）
